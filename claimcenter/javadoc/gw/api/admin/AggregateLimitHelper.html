<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) -->
<title>AggregateLimitHelper (Guidewire Java API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: gw.api.admin, class: AggregateLimitHelper">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">gw.api.admin</a></div>
<h1 title="Class AggregateLimitHelper" class="title">Class AggregateLimitHelper</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">gw.api.admin.AggregateLimitHelper</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../web/PageHelper.html" title="interface in gw.api.web">PageHelper</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">AggregateLimitHelper</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../web/PageHelper.html" title="interface in gw.api.web">PageHelper</a></span></div>
<div class="block">UI helper object that caches coverage lines on the pages that create and edit aggregate limits. An aggregate limit
 has an array of CoverageLineLimit entities, each of which can refer to a CoverageLine. A single CoverageLine can be
 shared between multiple AggregateLimits, in which case it will be referred to by multiple CoverageLineLimit entities.
 <p>
 This helper simplifies the editing process by never modifying a CoverageLine. Instead it creates extra,
 possibly temporary, CoverageLines and leaves any original ones unchanged. Then, before the bundle is committed,
 <a href="#beforeCommit(entity.AggregateLimit)"><code>beforeCommit(AggregateLimit)</code></a> must be called to clean up any temporary CoverageLines that were not used and
 any existing CoverageLines that have been orphaned.
 </p>
 <p>
 When editing or creating an aggregate limit the main sequence of calls to the helper should be:
 <dl>
   <dt><a href="#initializeCoverageLineList(entity.AggregateLimit,entity.Policy)"><code>initializeCoverageLineList(AggregateLimit, Policy)</code></a></dt>
   <dd>
     Initializes the helper state. When editing an aggregate limit this method is called directly when the page is
     put into edit mode. When creating a new aggregate limit this method is called as a side effect of
     <a href="#resetCoveragesAndAssign(entity.AggregateLimit,typekey.PolicyPeriodType,entity.Policy)"><code>resetCoveragesAndAssign(AggregateLimit, PolicyPeriodType, Policy)</code></a>, the method used to reset state
     when an aggregate limit is put into a policy period. When creating a new aggregate limit it is required that the
     user pick a policy period before adding any coverage lines so it is guaranteed that the reset and initialization
     will happen in time.
   </dd>
   <dt><a href="#getFilteredList(typekey.CoverageType)"><code>getFilteredList(CoverageType)</code></a></dt>
   <dd>
     Called repeatedly to construct the potential "by coverage" coverage lines that match a particular coverage type.
     A "by coverage" coverage line matches on details of a particular coverage, in addition to a coverage type. This
     method is used to populate the drop down list of possible coverage lines used in the coverage line limits list
     view.
   </dd>
   <dt><a href="#setCoverageType(entity.CoverageLineLimit,typekey.CoverageType)"><code>setCoverageType(CoverageLineLimit, CoverageType)</code></a></dt>
   <dd>
     Called when editing the coverage line limits list view, when the user chooses a coverage type
   </dd>
   <dt><a href="#setCoverageLine(entity.CoverageLineLimit,entity.CoverageLine)"><code>setCoverageLine(CoverageLineLimit, CoverageLine)</code></a></dt>
   <dd>
     Called when editing the coverage line limits list view, when the user chooses a specific "coverage" coverage line
   </dd>
   <dt><a href="#beforeCommit(entity.AggregateLimit)"><code>beforeCommit(AggregateLimit)</code></a> </dt>
   <dd>
     Called from the before commit hook of the page, to clean up any coverage lines not connected to aggregate limits
     via a coverage line limit. This method must be called from the before commit hook so that any changes it makes
     will be rolled back in the case of a validation or database error.
   </dd>
   <dt><a href="#afterCommit()"><code>afterCommit()</code></a> or <a href="#afterCancel()"><code>afterCancel()</code></a></dt>
   <dd>
     Called after the page is committed or cancelled, to clean out the helper state. This step is vital if the same
     helper is to be reused. In the out of box configuration the new aggregate limit page always redirects to a
     different page, so it does not need to call either of these methods (the helper will be discarded on the page
     transition). But the aggregate limit edit page just changes to read only mode when an edit is completed, so
     it will reuse the same helper and must call one of these methods to clean up the state that was used when the
     page was being edited. Failure to call the method will lead to "null bundle" errors as the helper tries to
     access coverage lines that were removed by <a href="#beforeCommit(entity.AggregateLimit)"><code>beforeCommit(AggregateLimit)</code></a>.
   </dd>
 </dl>
 </p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">AggregateLimitHelper</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#afterCancel()" class="member-name-link">afterCancel</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called after the page is canceled, flushes the coverage line cache.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#afterCommit()" class="member-name-link">afterCommit</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called after the page is committed, clears any discarded lines from the coverage line cache</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#beforeCommit(entity.AggregateLimit)" class="member-name-link">beforeCommit</a><wbr>(<a href="../../../entity/AggregateLimit.html" title="class in entity">AggregateLimit</a>&nbsp;aggLimit)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called before the page is committed to clean up any coverage lines that are not referenced by any aggregate limits.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#canChangeGrouping(entity.Policy,typekey.PolicyPeriodType)" class="member-name-link">canChangeGrouping</a><wbr>(<a href="../../../entity/Policy.html" title="class in entity">Policy</a>&nbsp;currentPolicy,
 <a href="../../../typekey/PolicyPeriodType.html" title="class in typekey">PolicyPeriodType</a>&nbsp;currentPolicyPeriodType)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called to determine if the aggregateLimit's "Grouping" can be changed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../../entity/CoverageLine.html" title="class in entity">CoverageLine</a>[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFilteredList(entity.AggregateLimit,entity.Policy,typekey.CoverageType,typekey.CoverageSubtype)" class="member-name-link">getFilteredList</a><wbr>(<a href="../../../entity/AggregateLimit.html" title="class in entity">AggregateLimit</a>&nbsp;limit,
 <a href="../../../entity/Policy.html" title="class in entity">Policy</a>&nbsp;policy,
 <a href="../../../typekey/CoverageType.html" title="class in typekey">CoverageType</a>&nbsp;coverageType,
 <a href="../../../typekey/CoverageSubtype.html" title="class in typekey">CoverageSubtype</a>&nbsp;coverageSubtype)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a filtered list of "by coverage" lines based on the given coverageType, that is all the available
 CoverageLines where CoverageLine.CoverageType == coverageType and
 CoverageLine.LOBCoverageSubtype == coverageSubtype.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../../entity/CoverageLine.html" title="class in entity">CoverageLine</a>[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFilteredList(typekey.CoverageType)" class="member-name-link">getFilteredList</a><wbr>(<a href="../../../typekey/CoverageType.html" title="class in typekey">CoverageType</a>&nbsp;coverageType)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a filtered list of "by coverage" lines based on the given coverageType, that is all the available
 "by coverage" CoverageLines where CoverageLine.CoverageType == coverageType.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../../typekey/CoverageSubtype.html" title="class in typekey">CoverageSubtype</a>[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFilteredLOBCoverageSubtypeList(typekey.CoverageType)" class="member-name-link">getFilteredLOBCoverageSubtypeList</a><wbr>(<a href="../../../typekey/CoverageType.html" title="class in typekey">CoverageType</a>&nbsp;coverageType)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a filtered list of coverage subtypes that an exposure would need to have to match a coverage line.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#initializeCoverageLineList(entity.AggregateLimit,entity.Policy)" class="member-name-link">initializeCoverageLineList</a><wbr>(<a href="../../../entity/AggregateLimit.html" title="class in entity">AggregateLimit</a>&nbsp;limit,
 <a href="../../../entity/Policy.html" title="class in entity">Policy</a>&nbsp;policy)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initializes the map of available "by coverage" CoverageLines used to provide the filtered lists used in drop down
 lists in the AggregateLimitCoveragesLV.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#invalidateListViewCache(pcf.api.Location,java.lang.String)" class="member-name-link">invalidateListViewCache</a><wbr>(<a href="../../../pcf/api/Location.html" title="interface in pcf.api">Location</a>&nbsp;currentLocation,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;listViewID)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invalidates a list view's cache forcing it to be resynchronized with the underlying data model.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../../entity/AggregateLimit.html" title="class in entity">AggregateLimit</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#makeNewAggregateLimit(entity.Claim,pcf.api.Location)" class="member-name-link">makeNewAggregateLimit</a><wbr>(<a href="../../../entity/Claim.html" title="class in entity">Claim</a>&nbsp;claim,
 <a href="../../../pcf/api/Location.html" title="interface in pcf.api">Location</a>&nbsp;location)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Called to make a new aggregateLimit instance with the correct
 aggLimitCalcCriteria and other default values already in place</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#resetCoveragesAndAssign(entity.AggregateLimit,typekey.PolicyPeriodType,entity.Policy)" class="member-name-link">resetCoveragesAndAssign</a><wbr>(<a href="../../../entity/AggregateLimit.html" title="class in entity">AggregateLimit</a>&nbsp;aggLimit,
 <a href="../../../typekey/PolicyPeriodType.html" title="class in typekey">PolicyPeriodType</a>&nbsp;policyPeriodType,
 <a href="../../../entity/Policy.html" title="class in entity">Policy</a>&nbsp;policy)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Removes any existing coverage lines from the given aggregate limit, sets its policy period and updates the cache of
 "by coverage" coverage lines.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setCoverageLine(entity.CoverageLineLimit,entity.CoverageLine)" class="member-name-link">setCoverageLine</a><wbr>(<a href="../../../entity/CoverageLineLimit.html" title="class in entity">CoverageLineLimit</a>&nbsp;limit,
 <a href="../../../entity/CoverageLine.html" title="class in entity">CoverageLine</a>&nbsp;selectedLine)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets the given "by coverage" CoverageLine on the given CoverageLineLimit.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setCoverageType(entity.CoverageLineLimit,typekey.CoverageType)" class="member-name-link">setCoverageType</a><wbr>(<a href="../../../entity/CoverageLineLimit.html" title="class in entity">CoverageLineLimit</a>&nbsp;limit,
 <a href="../../../typekey/CoverageType.html" title="class in typekey">CoverageType</a>&nbsp;selectedType)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tries to find an existing CoverageLine that matches only on the given coverage type.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setLOBCoverageSubtype(entity.CoverageLineLimit,typekey.CoverageSubtype)" class="member-name-link">setLOBCoverageSubtype</a><wbr>(<a href="../../../entity/CoverageLineLimit.html" title="class in entity">CoverageLineLimit</a>&nbsp;limit,
 <a href="../../../typekey/CoverageSubtype.html" title="class in typekey">CoverageSubtype</a>&nbsp;selectedCoverageSubtype)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tries to find an existing CoverageLine that matches only on the given coverage type/subtype.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>AggregateLimitHelper</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">AggregateLimitHelper</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="initializeCoverageLineList(entity.AggregateLimit,entity.Policy)">
<h3>initializeCoverageLineList</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initializeCoverageLineList</span><wbr><span class="parameters">(<a href="../../../entity/AggregateLimit.html" title="class in entity">AggregateLimit</a>&nbsp;limit,
 <a href="../../../entity/Policy.html" title="class in entity">Policy</a>&nbsp;policy)</span></div>
<div class="block">Initializes the map of available "by coverage" CoverageLines used to provide the filtered lists used in drop down
 lists in the AggregateLimitCoveragesLV. If there are "by coverage" lines that haven't yet been created for a
 given coverage on the policy, they are created here (if the bundle is writeable). Any that do not get used will be
 cleaned up by <a href="#beforeCommit(entity.AggregateLimit)"><code>beforeCommit(AggregateLimit)</code></a>.
 <p>
 Called when the user hits the edit button on the aggregate limit detail screen. When creating a new aggregate
 limit this method will be called implicitly when <a href="#resetCoveragesAndAssign(entity.AggregateLimit,typekey.PolicyPeriodType,entity.Policy)"><code>resetCoveragesAndAssign(AggregateLimit, typekey.PolicyPeriodType, entity.Policy)</code></a>
 is called. This will happen when the user picks the policy period into which the limit will be added (no coverage
 lines can be added until the policy period is known, so it does not matter that the helper is not initialized
 before then.)
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>limit</code> - the AggregateLimit for which the CoverageLines will be used</dd>
<dd><code>policy</code> - the Policy for which the PolicyPeriod on the AggregateLimit applies,
        specifically the one on this page.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="resetCoveragesAndAssign(entity.AggregateLimit,typekey.PolicyPeriodType,entity.Policy)">
<h3>resetCoveragesAndAssign</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">resetCoveragesAndAssign</span><wbr><span class="parameters">(<a href="../../../entity/AggregateLimit.html" title="class in entity">AggregateLimit</a>&nbsp;aggLimit,
 <a href="../../../typekey/PolicyPeriodType.html" title="class in typekey">PolicyPeriodType</a>&nbsp;policyPeriodType,
 <a href="../../../entity/Policy.html" title="class in entity">Policy</a>&nbsp;policy)</span></div>
<div class="block">Removes any existing coverage lines from the given aggregate limit, sets its policy period and updates the cache of
 "by coverage" coverage lines. If the aggregate limit has no limit type, sets its policy period to null. Otherwise
 finds the appropriate policy period using the given policy and policy period type.
 <p>
 Used if the user changes the limit type of an existing aggregate limit, invalidating any existing lines, or if the
 user is creating a brand new aggregate limit, in which case the policy period must be set before any coverage
 line limits are added.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>aggLimit</code> - the aggregate limit to be moved to a new policy period</dd>
<dd><code>policyPeriodType</code> - the desired policy period type</dd>
<dd><code>policy</code> - the policy, from which the available policy periods and coverages can be discovered</dd>
<dt>Throws:</dt>
<dd><code>com.guidewire.pl.web.controller.UserDisplayableException</code> - if no matching policy period can be found.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="invalidateListViewCache(pcf.api.Location,java.lang.String)">
<h3>invalidateListViewCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">invalidateListViewCache</span><wbr><span class="parameters">(<a href="../../../pcf/api/Location.html" title="interface in pcf.api">Location</a>&nbsp;currentLocation,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;listViewID)</span></div>
<div class="block">Invalidates a list view's cache forcing it to be resynchronized with the underlying data model.
 This is useful when a list view becomes out of sync for any reason.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>currentLocation</code> - the current location of the list view.</dd>
<dd><code>listViewID</code> - the String representation of the list view.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFilteredList(typekey.CoverageType)">
<h3>getFilteredList</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../../entity/CoverageLine.html" title="class in entity">CoverageLine</a>[]</span>&nbsp;<span class="element-name">getFilteredList</span><wbr><span class="parameters">(<a href="../../../typekey/CoverageType.html" title="class in typekey">CoverageType</a>&nbsp;coverageType)</span></div>
<div class="block">Returns a filtered list of "by coverage" lines based on the given coverageType, that is all the available
 "by coverage" CoverageLines where CoverageLine.CoverageType == coverageType. Does not return any CoverageLines
 for which CoverageLine.CoverageSubtype == null (i.e. it will not contain any coverage type only coverage lines).
 <p>
 Called in the list view displaying coverage line limits, to show the possible coverage lines available
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>coverageType</code> - the non null type used to filter the list of available coverage lines</dd>
<dt>Returns:</dt>
<dd>a non null but possibly empty array of coverage lines</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFilteredList(entity.AggregateLimit,entity.Policy,typekey.CoverageType,typekey.CoverageSubtype)">
<h3>getFilteredList</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../../entity/CoverageLine.html" title="class in entity">CoverageLine</a>[]</span>&nbsp;<span class="element-name">getFilteredList</span><wbr><span class="parameters">(<a href="../../../entity/AggregateLimit.html" title="class in entity">AggregateLimit</a>&nbsp;limit,
 <a href="../../../entity/Policy.html" title="class in entity">Policy</a>&nbsp;policy,
 <a href="../../../typekey/CoverageType.html" title="class in typekey">CoverageType</a>&nbsp;coverageType,
 <a href="../../../typekey/CoverageSubtype.html" title="class in typekey">CoverageSubtype</a>&nbsp;coverageSubtype)</span></div>
<div class="block">Returns a filtered list of "by coverage" lines based on the given coverageType, that is all the available
 CoverageLines where CoverageLine.CoverageType == coverageType and
 CoverageLine.LOBCoverageSubtype == coverageSubtype. Does not return any CoverageLines for which
 CoverageLine.CoverageSubtype == null (i.e. it will not contain any coverage type only coverage lines).
 <p>
 Called in the list view displaying coverage line limits, to show the possible coverage lines available
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>limit</code> - the AggregateLimit for which the CoverageLines will be used</dd>
<dd><code>policy</code> - the Policy for which the PolicyPeriod on the AggregateLimit applies,
        specifically the one on this page.</dd>
<dd><code>coverageType</code> - the non null type used to filter the list of available coverage lines</dd>
<dd><code>coverageSubtype</code> - the non null type used to filter the list of available coverage lines</dd>
<dt>Returns:</dt>
<dd>a non null but possibly empty array of coverage lines</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFilteredLOBCoverageSubtypeList(typekey.CoverageType)">
<h3>getFilteredLOBCoverageSubtypeList</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../../typekey/CoverageSubtype.html" title="class in typekey">CoverageSubtype</a>[]</span>&nbsp;<span class="element-name">getFilteredLOBCoverageSubtypeList</span><wbr><span class="parameters">(<a href="../../../typekey/CoverageType.html" title="class in typekey">CoverageType</a>&nbsp;coverageType)</span></div>
<div class="block">Returns a filtered list of coverage subtypes that an exposure would need to have to match a coverage line.
 Does not return any CoverageSubtypes when coverageType is null.
 <p>
 Called in the list view displaying coverage line limits, to show the possible coverage subtypes available
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>coverageType</code> - the non null type used to filter the list of available coverage subtypes</dd>
<dt>Returns:</dt>
<dd>a non null but possibly empty array of coverage subtypes</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setCoverageType(entity.CoverageLineLimit,typekey.CoverageType)">
<h3>setCoverageType</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setCoverageType</span><wbr><span class="parameters">(<a href="../../../entity/CoverageLineLimit.html" title="class in entity">CoverageLineLimit</a>&nbsp;limit,
 <a href="../../../typekey/CoverageType.html" title="class in typekey">CoverageType</a>&nbsp;selectedType)</span></div>
<div class="block">Tries to find an existing CoverageLine that matches only on the given coverage type. If such a line is
 found, sets it on the given coverage line limit. If not, creates a new CoverageLine that matches only
 on the given type, adds it to the policy period and then sets that on the limit. If the specified type
 is null, sets the limit's coverage line to null.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>limit</code> - a non null CoverageLineLimit</dd>
<dd><code>selectedType</code> - a possibly null coverage type</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setLOBCoverageSubtype(entity.CoverageLineLimit,typekey.CoverageSubtype)">
<h3>setLOBCoverageSubtype</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setLOBCoverageSubtype</span><wbr><span class="parameters">(<a href="../../../entity/CoverageLineLimit.html" title="class in entity">CoverageLineLimit</a>&nbsp;limit,
 <a href="../../../typekey/CoverageSubtype.html" title="class in typekey">CoverageSubtype</a>&nbsp;selectedCoverageSubtype)</span></div>
<div class="block">Tries to find an existing CoverageLine that matches only on the given coverage type/subtype. If such a line is
 found, sets it on the given coverage line limit. If not, creates a new CoverageLine that matches only
 on the given type and subtype, adds it to the policy period, and then sets that on the limit. If the specified type
 is null and there's no exposure unit number, it resets it to a coverage type-only line.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>limit</code> - a non null CoverageLineLimit</dd>
<dd><code>selectedCoverageSubtype</code> - a possibly null coverage type</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setCoverageLine(entity.CoverageLineLimit,entity.CoverageLine)">
<h3>setCoverageLine</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setCoverageLine</span><wbr><span class="parameters">(<a href="../../../entity/CoverageLineLimit.html" title="class in entity">CoverageLineLimit</a>&nbsp;limit,
 @Nullable
 <a href="../../../entity/CoverageLine.html" title="class in entity">CoverageLine</a>&nbsp;selectedLine)</span></div>
<div class="block">Sets the given "by coverage" CoverageLine on the given CoverageLineLimit. Handles case where selectedLine is null,
 which means that the user has specified only a coverage type; in that case this method will call
 <a href="#setCoverageType(entity.CoverageLineLimit,typekey.CoverageType)"><code>setCoverageType(CoverageLineLimit,CoverageType)</code></a> to set up the appropriate coverage type only coverage
 line.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>limit</code> - the coverage line limit to be updated</dd>
<dd><code>selectedLine</code> - the selected coverage line, or null</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="beforeCommit(entity.AggregateLimit)">
<h3>beforeCommit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">beforeCommit</span><wbr><span class="parameters">(<a href="../../../entity/AggregateLimit.html" title="class in entity">AggregateLimit</a>&nbsp;aggLimit)</span></div>
<div class="block">Called before the page is committed to clean up any coverage lines that are not referenced by any aggregate limits.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>aggLimit</code> - the aggregate limit that is being committed</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="afterCommit()">
<h3>afterCommit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">afterCommit</span>()</div>
<div class="block">Called after the page is committed, clears any discarded lines from the coverage line cache</div>
</section>
</li>
<li>
<section class="detail" id="afterCancel()">
<h3>afterCancel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">afterCancel</span>()</div>
<div class="block">Called after the page is canceled, flushes the coverage line cache.</div>
</section>
</li>
<li>
<section class="detail" id="canChangeGrouping(entity.Policy,typekey.PolicyPeriodType)">
<h3>canChangeGrouping</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">canChangeGrouping</span><wbr><span class="parameters">(<a href="../../../entity/Policy.html" title="class in entity">Policy</a>&nbsp;currentPolicy,
 <a href="../../../typekey/PolicyPeriodType.html" title="class in typekey">PolicyPeriodType</a>&nbsp;currentPolicyPeriodType)</span></div>
<div class="block">Called to determine if the aggregateLimit's "Grouping" can be changed.  The grouping indicates whether the aggregateLimit
 applies to the Policy or the Account level.  But rather than being an attribute on the AggregateLimit entity, this is implemented
 as a foreign key to a particular PolicyPeriod: If the aggregateLimit's referenced PolicyPeriod.PolicyPeriodType
 is Policy, then the aggregate limit's grouping is Policy.
 If the aggreageLimits refers to a PolicyPeriod whose type is Account, then the aggregateLimit's grouping
 is Account. If there are any archived claims present a PolicyPeriod, then we do not permit an aggregate limit to be changed to that
 policy period.  So this method looks at the PolicyPeriods that might be selected if the grouping were to change, and only
 allows a change when there is another policy period present for this policy which does not have any archived claims.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>currentPolicy</code> - the policy which is in the current policy period, must not be null</dd>
<dd><code>currentPolicyPeriodType</code> - the proposed new policy period type</dd>
<dt>Returns:</dt>
<dd>true if can move an aggregate limit to the policy period with the proposed type, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="makeNewAggregateLimit(entity.Claim,pcf.api.Location)">
<h3>makeNewAggregateLimit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../../entity/AggregateLimit.html" title="class in entity">AggregateLimit</a></span>&nbsp;<span class="element-name">makeNewAggregateLimit</span><wbr><span class="parameters">(<a href="../../../entity/Claim.html" title="class in entity">Claim</a>&nbsp;claim,
 <a href="../../../pcf/api/Location.html" title="interface in pcf.api">Location</a>&nbsp;location)</span></div>
<div class="block">Called to make a new aggregateLimit instance with the correct
 aggLimitCalcCriteria and other default values already in place</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><p>Copyright &#169; 2001-2014 Guidewire Software, Inc. All rights reserved.</p><p>Guidewire, Guidewire Software, Guidewire ClaimCenter, Guidewire PolicyCenter, Guidewire BillingCenter, Guidewire Reinsurance Management, Guidewire ContactManager, Guidewire Vendor Data Management, Guidewire Client Data Management, Guidewire Rating Management, Guidewire InsuranceSuite, Guidewire ContactCenter, Guidewire Studio, Guidewire Product Designer, Guidewire Live, Guidewire DataHub, Guidewire InfoCenter, Guidewire Standard Reporting, Guidewire ExampleCenter, Guidewire Account Manager Portal, Guidewire Claim Portal, Guidewire Policyholder Portal, ClaimCenter, BillingCenter, PolicyCenter, InsuranceSuite, Gosu, Deliver Insurance Your Way, and the Guidewire logo are trademarks, service marks, or registered trademarks of Guidewire Software, Inc. in the United States and/or other countries.</p><p>Guidewire, Guidewire Software, Guidewire ClaimCenter, Guidewire PolicyCenter, Guidewire BillingCenter, Guidewire InsuranceSuite, Gosu, Deliver Insurance Your Way, and the Guidewire logo are trademarks, service marks, or registered trademarks of Guidewire Software, Inc. in the United States and/or other countries.</p><p>All other trademarks are the property of their respective owners.</p><p>This material is confidential and proprietary to Guidewire and subject to the confidentiality terms in the applicable license agreement and/or separate nondisclosure agreement.</p><p>Guidewire products are protected by one or more United States patents.</p></small></p>
</footer>
</div>
</div>
</body>
</html>
